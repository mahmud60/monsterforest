var _0x14a7=['post','indexOf','match','index','slice','writeFile','upath','fs-extra','html-minifier','minify','pug','<head>','</head>','map','toString','filter','renderFile','endsWith','<style>','</style><script\x20type=\x22text/javascript\x22>','join','</script>','api','relations','compress','unity','undefined','config','compressType','minificationMode','ConcatAndMinify','None','templatePath','getInjectionChunks','Abstract\x20platform\x20is\x20not\x20aware\x20of\x20injection\x20chunks!','bundle','package','scripts','combineScripts','inlineScripts','blobs','combineBlobs','jsons','combineJsons','inlineJsons','sounds','combineSounds','inlineSounds','images','inlineImages','getVideos','inlineVideos','storeHTML','buildTemplate','env','STATS','inject','constructor','source.html','targetFolder','index.html','generatePackageConfig'];(function(_0x27be80,_0x249198){var _0x914444=function(_0x23b890){while(--_0x23b890){_0x27be80['push'](_0x27be80['shift']());}};_0x914444(++_0x249198);}(_0x14a7,0x13c));var _0x11be=function(_0x132f75,_0x4e7c98){_0x132f75=_0x132f75-0x0;var _0x2b3c0c=_0x14a7[_0x132f75];return _0x2b3c0c;};const path=require(_0x11be('0x0'));const fs=require(_0x11be('0x1'));const minifyhtml=require(_0x11be('0x2'))[_0x11be('0x3')];const pug=require(_0x11be('0x4'));const BROTLI_COMPRESSION=0x0;const HTML_TAG_REGEX=/<html[^>]*>/i;const HEAD_OPENING_TAG_STRING=_0x11be('0x5');const HEAD_CLOSING_TAG_STRING=_0x11be('0x6');const BODY_CLOSING_TAG_STRING='</body>';const INJECTION_MINIFICATION_CONFIG={'minifyCSS':!![],'minifyJS':!![],'collapseWhitespace':!![]};const renderChunks=(_0x9536e7,_0x347939)=>{const _0x41576b=_0x9536e7['filter'](_0x207073=>_0x207073['endsWith']('.js'))[_0x11be('0x7')](_0x5efdd6=>fs['readFileSync'](_0x5efdd6)[_0x11be('0x8')]());const _0x4b8f59=_0x9536e7[_0x11be('0x9')](_0x1ca4aa=>_0x1ca4aa['endsWith']('.pug'))[_0x11be('0x7')](_0x32e394=>pug[_0x11be('0xa')](_0x32e394,_0x347939));const _0x2d043c=_0x9536e7[_0x11be('0x9')](_0x5f2c33=>_0x5f2c33[_0x11be('0xb')]('.css'))[_0x11be('0x7')](_0x26db3b=>fs['readFileSync'](_0x26db3b)['toString']());return minifyhtml(_0x11be('0xc')+_0x2d043c['join']('\x0a')+_0x11be('0xd')+_0x41576b[_0x11be('0xe')](';')+_0x11be('0xf')+_0x4b8f59[_0x11be('0xe')](''),INJECTION_MINIFICATION_CONFIG);};module['exports']=class Platform{constructor(_0x29f0ef){this[_0x11be('0x10')]=_0x29f0ef;this[_0x11be('0x11')]=[];this[_0x11be('0x12')]=typeof global['config'][_0x11be('0x13')]['compressResources']!==_0x11be('0x14')?global[_0x11be('0x15')][_0x11be('0x13')]['compressResources']:!![];this[_0x11be('0x16')]=global['config'][_0x11be('0x13')]['compressType']||BROTLI_COMPRESSION;const _0x2954fa=typeof global[_0x11be('0x15')][_0x11be('0x13')]['minify']!==_0x11be('0x14')?global[_0x11be('0x15')][_0x11be('0x13')][_0x11be('0x3')]:!![];this[_0x11be('0x17')]=_0x2954fa?MinificationMode[_0x11be('0x18')]:MinificationMode[_0x11be('0x19')];}get[_0x11be('0x1a')](){return path['resolve'](__dirname,'index.pug');}async[_0x11be('0x1b')](){throw new Error(_0x11be('0x1c'));}async[_0x11be('0x1d')](){this[_0x11be('0x1e')]=this[_0x11be('0x1e')]||{};this[_0x11be('0x1f')]=await this['api'][_0x11be('0x20')](null,this[_0x11be('0x1e')][_0x11be('0x21')],this[_0x11be('0x17')],this[_0x11be('0x12')]);this[_0x11be('0x22')]=await this['api'][_0x11be('0x23')](this['package']['inlineBlobs'],this['compress']);this[_0x11be('0x24')]=await this[_0x11be('0x10')][_0x11be('0x25')](this[_0x11be('0x1e')][_0x11be('0x26')],this[_0x11be('0x12')]);this[_0x11be('0x27')]=await this['api'][_0x11be('0x28')](this['package'][_0x11be('0x29')],this[_0x11be('0x12')]);this[_0x11be('0x2a')]=await this['api']['getImages'](this[_0x11be('0x1e')][_0x11be('0x2b')]);this['videos']=await this[_0x11be('0x10')][_0x11be('0x2c')](this['package'][_0x11be('0x2d')]);await this[_0x11be('0x10')][_0x11be('0x2e')](await this[_0x11be('0x2f')]());if(!process[_0x11be('0x30')][_0x11be('0x31')]){return;}await this[_0x11be('0x10')]['getAssetsStatistic'](this);}async[_0x11be('0x32')](){const _0xcf81f7=this[_0x11be('0x10')][_0x11be('0x33')];const _0x1a169f=path[_0x11be('0xe')](_0xcf81f7['sourceFolder'],_0x11be('0x34'));const _0x50217e=path['join'](_0xcf81f7[_0x11be('0x35')],_0x11be('0x36'));const _0x257101=await fs['readFile'](_0x1a169f);const _0x321b52=await this[_0x11be('0x1b')]();const _0x40b03e=await this[_0x11be('0x37')]();const [_0x5e8f48,_0x3ae248]=[renderChunks(_0x321b52['pre'],_0x40b03e),renderChunks(_0x321b52[_0x11be('0x38')],_0x40b03e)];let _0x8e427=_0x257101[_0x11be('0x8')]();if(_0x8e427[_0x11be('0x39')](HEAD_OPENING_TAG_STRING)<0x0){const _0x40a99c=_0x8e427[_0x11be('0x3a')](HTML_TAG_REGEX);if(_0x40a99c){const _0x189398=_0x40a99c[_0x11be('0x3b')]+_0x40a99c[0x0]['length'];_0x8e427=_0x8e427[_0x11be('0x3c')](0x0,_0x189398)+HEAD_OPENING_TAG_STRING+HEAD_CLOSING_TAG_STRING+_0x8e427[_0x11be('0x3c')](_0x189398);}else{_0x8e427=HEAD_OPENING_TAG_STRING+HEAD_CLOSING_TAG_STRING+_0x8e427;}}let _0x34bbe6=_0x8e427;const _0x422f07=_0x34bbe6[_0x11be('0x39')](HEAD_OPENING_TAG_STRING)+HEAD_OPENING_TAG_STRING['length'];_0x34bbe6=_0x34bbe6[_0x11be('0x3c')](0x0,_0x422f07)+_0x5e8f48+_0x34bbe6['slice'](_0x422f07);const _0x2fe635=_0x34bbe6[_0x11be('0x39')](BODY_CLOSING_TAG_STRING);_0x34bbe6=_0x34bbe6['slice'](0x0,_0x2fe635)+_0x3ae248+_0x34bbe6[_0x11be('0x3c')](_0x2fe635);await fs[_0x11be('0x3d')](_0x50217e,_0x34bbe6);}async[_0x11be('0x2f')](_0x2e475f){const _0x2dfa65=_0x2e475f||(await this[_0x11be('0x37')]());return this[_0x11be('0x10')]['generateHTML'](this[_0x11be('0x1a')],_0x2dfa65);}async[_0x11be('0x37')](){return this[_0x11be('0x10')][_0x11be('0x37')](this);}};