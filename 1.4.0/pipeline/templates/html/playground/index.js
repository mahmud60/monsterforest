var _0x315b=['playground.json','createBuildConfig','luna.json','writeFile','stringify','config','index.pug','generatePackageConfig','external','prototype','inject','exports','upath','fs-extra','../platform','api','scripts','bundleAssets','getScriptsRelations','push','combineScripts','ConcatAndMinify','engine','storeHTML','buildTemplate','copyPlaygroundManifest','createScriptsManifest','copyResources','resolve','resources','content.js','constructor','join','targetFolder','copy','sourceFolder'];(function(_0x29e769,_0x4433aa){var _0x2253fe=function(_0x1fd7bc){while(--_0x1fd7bc){_0x29e769['push'](_0x29e769['shift']());}};_0x2253fe(++_0x4433aa);}(_0x315b,0x150));var _0x396e=function(_0x37fa1b,_0x246a32){_0x37fa1b=_0x37fa1b-0x0;var _0x561c60=_0x315b[_0x37fa1b];return _0x561c60;};const path=require(_0x396e('0x0'));const fs=require(_0x396e('0x1'));const Platform=require(_0x396e('0x2'));const SCRIPTS_MANIFEST=[{'src':'scripts.js','priority':0x0}];class PlaygroundPlatform{constructor(_0x5550ba){this[_0x396e('0x3')]=_0x5550ba;this[_0x396e('0x4')]=[];}async['bundle'](){await this['api'][_0x396e('0x5')]();const _0x9c4414=await this[_0x396e('0x3')][_0x396e('0x6')]();await this['api']['createResourcesCache'](_0x9c4414);this[_0x396e('0x4')][_0x396e('0x7')](await this[_0x396e('0x3')][_0x396e('0x8')](_0x9c4414,![],MinificationMode[_0x396e('0x9')],![],_0x396e('0xa')));await this[_0x396e('0x3')][_0x396e('0xb')](await this[_0x396e('0xc')]());await this[_0x396e('0xd')]();await this[_0x396e('0xe')]();await this['createBuildConfig']();await this[_0x396e('0xf')]();await this[_0x396e('0x3')]['generateZipFile']('playground.zip');}async['getInjectionChunks'](){const _0x486f81=[path[_0x396e('0x10')](__dirname,'..',_0x396e('0x11'),'js','thirdparty.js')];const _0x480a38=[path['resolve'](__dirname,_0x396e('0x12')),path[_0x396e('0x10')](__dirname,'runtime.js')];return{'pre':_0x486f81,'post':_0x480a38};}async[_0x396e('0xf')](){const _0x1160d2=this[_0x396e('0x3')][_0x396e('0x13')];await fs['copy'](path[_0x396e('0x14')](_0x1160d2['sourceFolder'],'resources'),path['join'](_0x1160d2[_0x396e('0x15')],'resources'));}async[_0x396e('0xd')](){const _0x4ff15a=this[_0x396e('0x3')][_0x396e('0x13')];await fs[_0x396e('0x16')](path[_0x396e('0x14')](_0x4ff15a[_0x396e('0x17')],'js',_0x396e('0x18')),path['join'](_0x4ff15a[_0x396e('0x15')],_0x396e('0x18')));}async[_0x396e('0x19')](){const _0xd30535=this[_0x396e('0x3')][_0x396e('0x13')];const _0x241a5c=path[_0x396e('0x14')](_0xd30535[_0x396e('0x15')],_0x396e('0x1a'));await fs[_0x396e('0x1b')](_0x241a5c,JSON[_0x396e('0x1c')](global[_0x396e('0x1d')]));}async[_0x396e('0xe')](){const _0x5a6250=this[_0x396e('0x3')]['constructor'];const _0x35d937=path[_0x396e('0x14')](_0x5a6250[_0x396e('0x15')],_0x396e('0xa'),'manifest.json');await fs[_0x396e('0x1b')](_0x35d937,JSON[_0x396e('0x1c')](SCRIPTS_MANIFEST));}async[_0x396e('0xc')](){const _0x4fb4b8=path[_0x396e('0x10')](__dirname,_0x396e('0x1e'));return this[_0x396e('0x3')]['generateHTML'](_0x4fb4b8,await this['generatePackageConfig']());}async[_0x396e('0x1f')](){const _0x2c5b8b=await this[_0x396e('0x3')][_0x396e('0x1f')](this);_0x2c5b8b[_0x396e('0x1d')]={'json':_0x396e('0x20'),'image':_0x396e('0x20'),'video':_0x396e('0x20'),'blob':'external','sound':'external'};return _0x2c5b8b;}}PlaygroundPlatform[_0x396e('0x21')][_0x396e('0x22')]=Platform[_0x396e('0x21')][_0x396e('0x22')];module[_0x396e('0x23')]=PlaygroundPlatform;